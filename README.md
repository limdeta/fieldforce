# Instock FieldForce

Приложение для торговых представителей компании.

Любые взаимодействия с внешними сервисами производить в виде заглушек/моков, максимально приближённых к реальному API.

Roadmap:
Нужно сделать MVP в виде магазина с offline-first каталогом. Отработать импорты и интерфейсы.
  - **Торговые точки**. Проверить, есть ли связь «точки - пользователь». Сейчас стоит заглушка, которая при первом входе импортирует и устанавливает точку из текущей выбранной на Instock. Нужно сделать способ обновления точек для пользователя. Пока можно сделать в виде заглушки: захардкодить response в виде нескольких реальных точек из Instock (Камчатка, Магадан, Владивосток). Обновить страницу с ТТ и сделать выбор точки (пока вручную выбираем точку).

  - **Каталог. Отображение.** Сделать настройку отображения (обычный режим: каталог и товары — разные страницы; и split-режим, когда каталог и товары на одном экране). Настройку можно хранить в user preferences, которые уже готовы к использованию. Кешировать расчёт количества товаров в дереве.

  - **Каталог. Категории прайса.** Сделать всё то же самое, что с обычными категориями.
  
  - **Каталог. Характеристики, фильтры и поиск.** Реализовать базовый поиск по товарам в офлайн-режиме. Реализовать фесетный поиск(не очевидно как аггрегировать все возможные характеристики и аттрибуты, на инстоке этим всем занимается elastic). В онлайн-режиме делать запрос на бэкенд и отрисовывать результаты в каталоге. Подумать, как можно делать пагинацию при работе с бэкендом и как кешировать картинки/информацию.

   - **Корзина.** Скопировать с сайта, кроме способа получения.

   - **Акции.** Продумать акции и как их хранить, а также привязку к точкам и товарам.

   - **Интерфейс.** Привести всё к единому стилю. Использовать цвета темы а не хардкодить.

   - **Продукт.** Вывести все возможные данные о продукте, проверить работу карусели с картинками. Сделать красиво карточку продукта.

Команды:
```bash
flutter pub run build_runner build --delete-conflicting-outputs
flutter test
```

Пример интеграционного теста:
```bash
flutter test .\integration_test\login_test.dart -d windows --dart-define=ENV=dev
```

Для разработки (dev режим по умолчанию с фикстурами):
```bash
flutter run -d windows --dart-define=flutter.flutter_map.unblockOSM="Our tile servers are not." --dart-define=ENV=dev
```

Собрать APK:
```bash
flutter build apk --dart-define=ENV=prod --release --dart-define=flutter.flutter_map.unblockOSM="Our tile servers are not."
```
